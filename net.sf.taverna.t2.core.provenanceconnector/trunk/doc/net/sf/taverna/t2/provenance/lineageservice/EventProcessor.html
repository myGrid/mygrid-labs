<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_20) on Wed Jan 13 13:48:53 GMT 2010 -->
<TITLE>
EventProcessor
</TITLE>

<META NAME="keywords" CONTENT="net.sf.taverna.t2.provenance.lineageservice.EventProcessor class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="EventProcessor";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/EventProcessor.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/Dependencies.html" title="class in net.sf.taverna.t2.provenance.lineageservice"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/LineageQueryResultRecord.html" title="class in net.sf.taverna.t2.provenance.lineageservice"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="EventProcessor.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
net.sf.taverna.t2.provenance.lineageservice</FONT>
<BR>
Class EventProcessor</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>net.sf.taverna.t2.provenance.lineageservice.EventProcessor</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>EventProcessor</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Paolo Missier</DD>
</DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#EventProcessor()">EventProcessor</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#EventProcessor(net.sf.taverna.t2.provenance.lineageservice.ProvenanceWriter, net.sf.taverna.t2.provenance.lineageservice.ProvenanceQuery, net.sf.taverna.t2.provenance.lineageservice.WorkflowDataProcessor)">EventProcessor</A></B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceWriter.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceWriter</A>&nbsp;pw,
               <A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceQuery.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceQuery</A>&nbsp;pq,
               <A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/WorkflowDataProcessor.html" title="class in net.sf.taverna.t2.provenance.lineageservice">WorkflowDataProcessor</A>&nbsp;wfdp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#fillInputVarBindings(java.lang.Object)">fillInputVarBindings</A></B>(java.lang.Object&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for each arc of the form (_INPUT_/I, P/V): propagate VarBinding for P/V
 to var _INPUT_/I <br/></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#fillOutputVarBindings(java.lang.Object)">fillOutputVarBindings</A></B>(java.lang.Object&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for each arc of the form (P/V, _OUTPUT_/O): propagate VarBinding for P/V
 to var _OUTPUT_/O <br/></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceQuery.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceQuery</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#getPq()">getPq</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceWriter.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceWriter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#getPw()">getPw</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/WorkflowDataProcessor.html" title="class in net.sf.taverna.t2.provenance.lineageservice">WorkflowDataProcessor</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#getWfdp()">getWfdp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#getWfInstanceID()">getWfInstanceID</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#patchTopLevelnputs()">patchTopLevelnputs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fills in the VBs for the global inputs -- this removes the need for explicit events
 that account for these value bindings...</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#processDataflowStructure(net.sf.taverna.t2.workflowmodel.Dataflow, java.lang.String, java.lang.String)">processDataflowStructure</A></B>(net.sf.taverna.t2.workflowmodel.Dataflow&nbsp;df,
                         java.lang.String&nbsp;dataflowID,
                         java.lang.String&nbsp;externalName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;note: this method can be called as part of a recursion on sub-workflows</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#processProcessEvent(net.sf.taverna.t2.provenance.item.ProvenanceItem, java.lang.String)">processProcessEvent</A></B>(net.sf.taverna.t2.provenance.item.ProvenanceItem&nbsp;provenanceItem,
                    java.lang.String&nbsp;currentWorkflowID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processes an elementary process execution event from T2.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#processWorkflowStructure(net.sf.taverna.t2.provenance.item.ProvenanceItem)">processWorkflowStructure</A></B>(net.sf.taverna.t2.provenance.item.ProvenanceItem&nbsp;provenanceItem)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this is the new version that makes use of the T2 deserializer
 populate static portion of the DB<br/>
 the static structure may already be in the DB -- this is detected as a duplicate top-level workflow ID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#propagateANL(java.lang.String)">propagateANL</A></B>(java.lang.String&nbsp;wfInstanceId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#reconcileTopLevelOutputs()">reconcileTopLevelOutputs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reconcile the top level outputs with the results from its immediate precedessors in the graph.<br/>
 various cases have to be considered: predecessors may include records that are not in the output, 
 while the output may include nested list structures that are not in the precedessors.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#saveEvent(net.sf.taverna.t2.provenance.item.ProvenanceItem, net.sf.taverna.t2.provenance.vocabulary.SharedVocabulary)">saveEvent</A></B>(net.sf.taverna.t2.provenance.item.ProvenanceItem&nbsp;provenanceItem,
          net.sf.taverna.t2.provenance.vocabulary.SharedVocabulary&nbsp;eventType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log raw event to file system</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#setPq(net.sf.taverna.t2.provenance.lineageservice.ProvenanceQuery)">setPq</A></B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceQuery.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceQuery</A>&nbsp;pq)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#setPw(net.sf.taverna.t2.provenance.lineageservice.ProvenanceWriter)">setPw</A></B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceWriter.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceWriter</A>&nbsp;pw)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#setWfdp(net.sf.taverna.t2.provenance.lineageservice.WorkflowDataProcessor)">setWfdp</A></B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/WorkflowDataProcessor.html" title="class in net.sf.taverna.t2.provenance.lineageservice">WorkflowDataProcessor</A>&nbsp;wfdp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#setWfInstanceID(java.lang.String)">setWfInstanceID</A></B>(java.lang.String&nbsp;wfInstanceID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;net.sf.taverna.t2.provenance.lineageservice.EventProcessor.Pair&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#toposort(java.lang.String, java.lang.String)">toposort</A></B>(java.lang.String&nbsp;dataflowName,
         java.lang.String&nbsp;wfInstanceId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;net.sf.taverna.t2.provenance.lineageservice.EventProcessor.Pair&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html#tsort(java.util.List, java.lang.String, java.util.Map, java.util.Map, java.lang.String, java.lang.String)">tsort</A></B>(java.util.List&lt;java.lang.String&gt;&nbsp;procList,
      java.lang.String&nbsp;dataflowName,
      java.util.Map&lt;java.lang.String,java.lang.Integer&gt;&nbsp;predecessorsCount,
      java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;&nbsp;successorsOf,
      java.lang.String&nbsp;wfNameRef,
      java.lang.String&nbsp;wfInstanceId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STUB</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="EventProcessor()"><!-- --></A><H3>
EventProcessor</H3>
<PRE>
public <B>EventProcessor</B>()</PRE>
<DL>
</DL>
<HR>

<A NAME="EventProcessor(net.sf.taverna.t2.provenance.lineageservice.ProvenanceWriter, net.sf.taverna.t2.provenance.lineageservice.ProvenanceQuery, net.sf.taverna.t2.provenance.lineageservice.WorkflowDataProcessor)"><!-- --></A><H3>
EventProcessor</H3>
<PRE>
public <B>EventProcessor</B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceWriter.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceWriter</A>&nbsp;pw,
                      <A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceQuery.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceQuery</A>&nbsp;pq,
                      <A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/WorkflowDataProcessor.html" title="class in net.sf.taverna.t2.provenance.lineageservice">WorkflowDataProcessor</A>&nbsp;wfdp)
               throws java.lang.InstantiationException,
                      java.lang.IllegalAccessException,
                      java.lang.ClassNotFoundException,
                      java.sql.SQLException</PRE>
<DL>
<DL>
<DT><B>Parameters:</B><DD><CODE>pw</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE>
<DD><CODE>java.lang.ClassNotFoundException</CODE>
<DD><CODE>java.lang.IllegalAccessException</CODE>
<DD><CODE>java.lang.InstantiationException</CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="processWorkflowStructure(net.sf.taverna.t2.provenance.item.ProvenanceItem)"><!-- --></A><H3>
processWorkflowStructure</H3>
<PRE>
public java.lang.String <B>processWorkflowStructure</B>(net.sf.taverna.t2.provenance.item.ProvenanceItem&nbsp;provenanceItem)</PRE>
<DL>
<DD>this is the new version that makes use of the T2 deserializer
 populate static portion of the DB<br/>
 the static structure may already be in the DB -- this is detected as a duplicate top-level workflow ID.
 In this case, we skip this processing altogether
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>content</CODE> - is a serialized dataflow (XML) -- this is parsed using the T2
            Deserializer
<DT><B>Returns:</B><DD>the wfInstanceRef for this workflow structure</DL>
</DD>
</DL>
<HR>

<A NAME="processDataflowStructure(net.sf.taverna.t2.workflowmodel.Dataflow, java.lang.String, java.lang.String)"><!-- --></A><H3>
processDataflowStructure</H3>
<PRE>
public java.lang.String <B>processDataflowStructure</B>(net.sf.taverna.t2.workflowmodel.Dataflow&nbsp;df,
                                                 java.lang.String&nbsp;dataflowID,
                                                 java.lang.String&nbsp;externalName)</PRE>
<DL>
<DD>note: this method can be called as part of a recursion on sub-workflows
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>df</CODE> - <DD><CODE>dataflowID</CODE> - the UUID for the entire dataflow (may be a sub-dataflow)<DD><CODE>localName</CODE> - the external name of the dataflow. Null if this is top level, not null if a sub-dataflow
<DT><B>Returns:</B><DD>the wfInstanceRef for this workflow structure</DL>
</DD>
</DL>
<HR>

<A NAME="processProcessEvent(net.sf.taverna.t2.provenance.item.ProvenanceItem, java.lang.String)"><!-- --></A><H3>
processProcessEvent</H3>
<PRE>
public void <B>processProcessEvent</B>(net.sf.taverna.t2.provenance.item.ProvenanceItem&nbsp;provenanceItem,
                                java.lang.String&nbsp;currentWorkflowID)</PRE>
<DL>
<DD>processes an elementary process execution event from T2. Collects info
 from events as they happen and sends them to the writer for processing
 when the iteration event is received. Uses the map of procBindings to
 process event id and the map of child ids to parent ids to ensure that
 the correct proc binding is used
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentWorkflowID</CODE> - <DD><CODE>d</CODE> - <DD><CODE>context</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="patchTopLevelnputs()"><!-- --></A><H3>
patchTopLevelnputs</H3>
<PRE>
public void <B>patchTopLevelnputs</B>()</PRE>
<DL>
<DD>fills in the VBs for the global inputs -- this removes the need for explicit events
 that account for these value bindings...
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="reconcileTopLevelOutputs()"><!-- --></A><H3>
reconcileTopLevelOutputs</H3>
<PRE>
public void <B>reconcileTopLevelOutputs</B>()</PRE>
<DL>
<DD>reconcile the top level outputs with the results from its immediate precedessors in the graph.<br/>
 various cases have to be considered: predecessors may include records that are not in the output, 
 while the output may include nested list structures that are not in the precedessors. This method accounts
 for a 2-way reconciliation that considers all possible cases.<br/>
 at the end, outputs and their predecessors contain the same data.<p/>
 NOTE: if we assume that data values (URIs) are <em>always</em> unique then this is greatly simplified by just
 comparing two sets of value records by their URIs and reconciling them. But this is not the way it is done here
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="saveEvent(net.sf.taverna.t2.provenance.item.ProvenanceItem, net.sf.taverna.t2.provenance.vocabulary.SharedVocabulary)"><!-- --></A><H3>
saveEvent</H3>
<PRE>
public void <B>saveEvent</B>(net.sf.taverna.t2.provenance.item.ProvenanceItem&nbsp;provenanceItem,
                      net.sf.taverna.t2.provenance.vocabulary.SharedVocabulary&nbsp;eventType)
               throws java.io.IOException</PRE>
<DL>
<DD>log raw event to file system
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>content</CODE> - <DD><CODE>eventType</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="fillInputVarBindings(java.lang.Object)"><!-- --></A><H3>
fillInputVarBindings</H3>
<PRE>
public void <B>fillInputVarBindings</B>(java.lang.Object&nbsp;context)
                          throws java.sql.SQLException</PRE>
<DL>
<DD>for each arc of the form (_INPUT_/I, P/V): propagate VarBinding for P/V
 to var _INPUT_/I <br/>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="fillOutputVarBindings(java.lang.Object)"><!-- --></A><H3>
fillOutputVarBindings</H3>
<PRE>
public void <B>fillOutputVarBindings</B>(java.lang.Object&nbsp;context)
                           throws java.sql.SQLException</PRE>
<DL>
<DD>for each arc of the form (P/V, _OUTPUT_/O): propagate VarBinding for P/V
 to var _OUTPUT_/O <br/>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="toposort(java.lang.String, java.lang.String)"><!-- --></A><H3>
toposort</H3>
<PRE>
public java.util.List&lt;net.sf.taverna.t2.provenance.lineageservice.EventProcessor.Pair&gt; <B>toposort</B>(java.lang.String&nbsp;dataflowName,
                                                                                                java.lang.String&nbsp;wfInstanceId)
                                                                                         throws java.sql.SQLException</PRE>
<DL>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="tsort(java.util.List, java.lang.String, java.util.Map, java.util.Map, java.lang.String, java.lang.String)"><!-- --></A><H3>
tsort</H3>
<PRE>
public java.util.List&lt;net.sf.taverna.t2.provenance.lineageservice.EventProcessor.Pair&gt; <B>tsort</B>(java.util.List&lt;java.lang.String&gt;&nbsp;procList,
                                                                                             java.lang.String&nbsp;dataflowName,
                                                                                             java.util.Map&lt;java.lang.String,java.lang.Integer&gt;&nbsp;predecessorsCount,
                                                                                             java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;&nbsp;successorsOf,
                                                                                             java.lang.String&nbsp;wfNameRef,
                                                                                             java.lang.String&nbsp;wfInstanceId)
                                                                                      throws java.sql.SQLException</PRE>
<DL>
<DD>STUB
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>procList</CODE> - <DD><CODE>predecessorsCount</CODE> - <DD><CODE>successorsOf</CODE> - <DD><CODE>wfInstanceId</CODE> - 
<DT><B>Returns:</B><DD>
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="propagateANL(java.lang.String)"><!-- --></A><H3>
propagateANL</H3>
<PRE>
public void <B>propagateANL</B>(java.lang.String&nbsp;wfInstanceId)
                  throws java.sql.SQLException</PRE>
<DL>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setPw(net.sf.taverna.t2.provenance.lineageservice.ProvenanceWriter)"><!-- --></A><H3>
setPw</H3>
<PRE>
public void <B>setPw</B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceWriter.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceWriter</A>&nbsp;pw)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPw()"><!-- --></A><H3>
getPw</H3>
<PRE>
public <A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceWriter.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceWriter</A> <B>getPw</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setPq(net.sf.taverna.t2.provenance.lineageservice.ProvenanceQuery)"><!-- --></A><H3>
setPq</H3>
<PRE>
public void <B>setPq</B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceQuery.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceQuery</A>&nbsp;pq)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPq()"><!-- --></A><H3>
getPq</H3>
<PRE>
public <A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/ProvenanceQuery.html" title="class in net.sf.taverna.t2.provenance.lineageservice">ProvenanceQuery</A> <B>getPq</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setWfInstanceID(java.lang.String)"><!-- --></A><H3>
setWfInstanceID</H3>
<PRE>
public void <B>setWfInstanceID</B>(java.lang.String&nbsp;wfInstanceID)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getWfInstanceID()"><!-- --></A><H3>
getWfInstanceID</H3>
<PRE>
public java.lang.String <B>getWfInstanceID</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setWfdp(net.sf.taverna.t2.provenance.lineageservice.WorkflowDataProcessor)"><!-- --></A><H3>
setWfdp</H3>
<PRE>
public void <B>setWfdp</B>(<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/WorkflowDataProcessor.html" title="class in net.sf.taverna.t2.provenance.lineageservice">WorkflowDataProcessor</A>&nbsp;wfdp)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getWfdp()"><!-- --></A><H3>
getWfdp</H3>
<PRE>
public <A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/WorkflowDataProcessor.html" title="class in net.sf.taverna.t2.provenance.lineageservice">WorkflowDataProcessor</A> <B>getWfdp</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/EventProcessor.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/Dependencies.html" title="class in net.sf.taverna.t2.provenance.lineageservice"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../net/sf/taverna/t2/provenance/lineageservice/LineageQueryResultRecord.html" title="class in net.sf.taverna.t2.provenance.lineageservice"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?net/sf/taverna/t2/provenance/lineageservice/EventProcessor.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="EventProcessor.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
